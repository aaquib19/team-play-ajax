<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>



<form method="POST"  action="{% url 'create-team' %}" >
  {% csrf_token %}
    <input type="text" name="tname" class="form-control" id="tname" placeholder="tname">
     <input type="hidden" name="pids" class="form-control" id="player" placeholder="player">

   <button type="submit" class="btn btn-primary">Submit</button>
</form>
<hr>


    <form method="POST" id="post-form">
  {% csrf_token %}
    <input type="text" class="form-control" id="pname" placeholder="pname">
    <input type="text" class="form-control" id="hscore" placeholder="hscore">
     <input class="form-control" id="age" placeholder="age">

   <button type="submit" class="btn btn-primary">Submit</button>
</form>
<hr>
<ol id="dynamic-fields">
    <div class="container1">
    <button class="add_form_field">Add New Field &nbsp;
      <span style="font-size:16px; font-weight:bold;">+ </span>
    </button>
    <div>
        <input type="text" name="mytext[]">
        <input type="text" name="mytext[]">
        <input type="text" name="mytext[]">
    </div>
</div>
</ol>


    <script src="/static/js/jquery-2.2.4.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
<script>
    $(document).on('submit', '#post-form',function(e){
        e.preventDefault();
    $.ajax({
        type:'POST',
        url:'{% url "create-player" %}',
        data:{
            pname:$('#pname').val(),
            hscore:$('#hscore').val(),
            age:$('#age').val(),
            csrfmiddlewaretoken:$('input[name=csrfmiddlewaretoken]').val(),
            action: 'post'
        },
        dataType: 'json',

        success:function(json){
           console.log(json)
            let old = $('#player').val()

            $('#player').val(json.id + ","+old)
            {#$('#pname').val("")#}
            {#$('#hscore').val("")#}
            {#$('#age').val("")#}

            let wrapper = document.getElementById("dynamic-fields");

          var input = document.createElement("input");
// ... and so on
            $(wrapper).append('<div><input type="text" name="mytext[]"/><a href="#" class="delete">Delete</a></div>'); //add input box
        },
        error : function(xhr,errmsg,err) {
        console.log(xhr.status + ": " + xhr.responseText); // provide a bit more info about the error to the console
    }
    });




});

</script>
<script>
    $(document).ready(function() {
    var max_fields = 10;
    var wrapper = $("#dynamic-fields");
    var add_button = $(".add_form_field");

    var x = 1;
    $(add_button).click(function(e) {
        e.preventDefault();
        if (x < max_fields) {
            x++;
            $(wrapper).append('<div>  <input type="text" name="mytext[]">\n' +
                '        <input type="text" name="mytext[]">\n' +
                '        <input type="text" name="mytext[]">               <a href="#" class="delete">Delete</a></div>'); //add input box
        } else {
            alert('You Reached the limits')
        }
    });

    $(wrapper).on("click", ".delete", function(e) {
        e.preventDefault();
        $(this).parent('div').remove();
        x--;
    })
});
</script>
</body>
</html>